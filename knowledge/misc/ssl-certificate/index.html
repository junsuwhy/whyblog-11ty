<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="WhyBlog - åˆ†äº«æŠ€è¡“èˆ‡ç”Ÿæ´»çš„å€‹äººéƒ¨è½æ ¼">
  <title>Nginx SSL æ†‘è­‰æª”æ¡ˆèˆ‡è½‰æª”è¨­å®šèªªæ˜ | WhyBlog</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Main stylesheet -->
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="logo-container">
        <h1 class="site-title"><a href="/"><i class="fas fa-terminal"></i> WhyBlog</a></h1>
      </div>
      <nav class="main-nav">
        <button class="menu-toggle" aria-label="Toggle menu">
          <span class="hamburger"></span>
        </button>
        <ul class="nav-links">
          <li><a href="/blog/"><i class="fas fa-pen-fancy"></i> éƒ¨è½æ ¼</a></li>
          <li><a href="/knowledge/"><i class="fas fa-book"></i> çŸ¥è­˜åº«</a></li>
          <li><a href="/about/"><i class="fas fa-user"></i> é—œæ–¼æˆ‘</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="main-content">
    <div class="container">
      
<article class="post">
  <header class="post-header">
    <h1>Nginx SSL æ†‘è­‰æª”æ¡ˆèˆ‡è½‰æª”è¨­å®šèªªæ˜</h1>
    <div class="post-meta">
      <time datetime="Wed May 01 2024 00:00:00 GMT+0000 (Coordinated Universal Time)">2024å¹´5æœˆ1æ—¥</time>
      
      <div class="post-tags">
        
          <span class="tag">knowledge</span>
        
          <span class="tag">nginx</span>
        
          <span class="tag">ssl</span>
        
          <span class="tag">certificate</span>
        
      </div>
      
    </div>
  </header>

  <div class="post-content">
    <h1>Nginx SSL æ†‘è­‰æª”æ¡ˆèˆ‡è½‰æª”è¨­å®šèªªæ˜</h1>
<blockquote>
<p>æœ¬æ–‡ä»¶æ•´ç†å¸¸è¦‹æ†‘è­‰æª”æ¡ˆæ ¼å¼ã€è½‰æª”æŒ‡ä»¤ã€Nginx è¨­å®šç¯„ä¾‹èˆ‡é©—è­‰ï¼é‡è¼‰æŒ‡ä»¤ï¼Œå¯ä½œç‚ºæ—¥å¾Œå¿«é€ŸæŸ¥é–±å‚™å¿˜ã€‚</p>
</blockquote>
<hr>
<h2>1. å¸¸è¦‹æª”æ¡ˆæ ¼å¼èˆ‡ç”¨é€”</h2>
<table>
<thead>
<tr>
<th>å‰¯æª”å</th>
<th>æ ¼å¼é¡å‹</th>
<th>å…¸å‹æª”æ¡ˆåç¯„ä¾‹</th>
<th>å…§å«è³‡æ–™</th>
<th>ä¸»è¦ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.key</code></td>
<td><strong>PEM</strong></td>
<td><code>server.key</code></td>
<td>ç§é‘°ï¼ˆå¯èƒ½æœ‰å¯†ç¢¼ï¼‰</td>
<td>ä¼ºæœå™¨ç«¯åƒ…å­˜æ”¾æ–¼æœ¬æ©Ÿï¼Œä¸å¯å¤–æµ</td>
</tr>
<tr>
<td><code>.crt</code> / <code>.cer</code></td>
<td><strong>PEM</strong> or <strong>DER</strong></td>
<td><code>example.com.crt</code></td>
<td>ä¼ºæœå™¨æ†‘è­‰ï¼ˆEndâ€‘entityï¼‰</td>
<td>æä¾›çµ¦ç”¨æˆ¶ç«¯é©—è­‰ç¶²ç«™èº«åˆ†</td>
</tr>
<tr>
<td><code>.pem</code></td>
<td><strong>PEM</strong></td>
<td><code>fullchain.pem</code></td>
<td>é€šå¸¸æ˜¯ã€Œæ†‘è­‰ + ä¸­ç¹¼ã€ä¸²æ¥</td>
<td>Nginx <code>ssl_certificate</code> å¸¸ç”¨</td>
</tr>
<tr>
<td><code>.p7b</code> / <code>.p7c</code></td>
<td><strong>PKCS#7</strong></td>
<td><code>bundle.p7b</code></td>
<td>å¤šå¼µã€Œä¸­ç¹¼/æ ¹ã€å°è£</td>
<td>å…ˆè½‰æˆ PEM ç”¨æ–¼ Nginx</td>
</tr>
<tr>
<td><code>.pfx</code> / <code>.p12</code></td>
<td><strong>PKCS#12</strong></td>
<td><code>cert_bundle.pfx</code></td>
<td>æ†‘è­‰ + ç§é‘°ï¼ˆå·²åŠ å¯†ï¼‰</td>
<td>Windows/IIS æˆ– Java Keystore åŒ¯å…¥</td>
</tr>
<tr>
<td><code>caâ€‘bundle</code> / <code>chain.pem</code></td>
<td><strong>PEM</strong></td>
<td><code>sectigo_chain.pem</code></td>
<td>ä¸­ç¹¼(+æ ¹)æ†‘è­‰</td>
<td>Nginx <code>ssl_trusted_certificate</code></td>
</tr>
</tbody>
</table>
<hr>
<h2>2. å¸¸ç”¨è½‰æª”æŒ‡ä»¤</h2>
<blockquote>
<p>æŒ‡ä»¤çš†ä»¥ <code>openssl</code> ç‚ºä¾‹ï¼Œå¯åœ¨ Linux/macOS ç›´æ¥ä½¿ç”¨ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>éœ€æ±‚</th>
<th>æŒ‡ä»¤ç¯„ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DER â†’ PEM</strong></td>
<td><code>openssl x509 -inform DER -in cert.cer -out cert.pem</code></td>
</tr>
<tr>
<td><strong>PKCS#7 (P7B) â†’ PEM</strong></td>
<td><code>openssl pkcs7 -print_certs -in bundle.p7b -out bundle.pem</code></td>
</tr>
<tr>
<td><strong>PFX â†’ æ†‘è­‰(ç„¡ç§é‘°)</strong></td>
<td><code>openssl pkcs12 -nokeys -in cert.pfx -out cert.pem</code></td>
</tr>
<tr>
<td><strong>PFX â†’ ç§é‘°(æœ‰å¯†ç¢¼)</strong></td>
<td><code>openssl pkcs12 -nocerts -in cert.pfx -out key.pem</code></td>
</tr>
<tr>
<td><strong>ç§»é™¤ç§é‘°å¯†ç¢¼</strong></td>
<td><code>openssl rsa -in key.pem -out key-nopw.pem</code></td>
</tr>
<tr>
<td><strong>åˆä½µæ†‘è­‰èˆ‡ä¸­ç¹¼</strong></td>
<td><code>cat cert.pem bundle.pem &gt; fullchain.pem</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>ğŸ”– <strong>å°æŠ€å·§</strong>ï¼šPEM æ®µè½ä¹‹é–“å‹™å¿…ä¿ç•™ä¸€å€‹ç©ºç™½æ›è¡Œï¼Œé¿å… <code>bad end line</code> éŒ¯èª¤ã€‚</p>
</blockquote>
<hr>
<h2>3. Nginx è¨­å®šç¯„ä¾‹</h2>
<h3>3.1 å–®æª” fullchain å¯«æ³•ï¼ˆæœ€ç°¡å–®ï¼‰</h3>
<pre><code class="language-nginx">server {
    listen 443 ssl http2;
    server_name  example.com www.example.com;

    ssl_certificate      /etc/nginx/ssl/fullchain.pem;   # æ†‘è­‰+ä¸­ç¹¼
    ssl_certificate_key  /etc/nginx/ssl/server.key;      # ç§é‘° (ç„¡å¯†ç¢¼)

    ssl_protocols        TLSv1.2 TLSv1.3;
    ssl_ciphers          HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
}
</code></pre>
<h3>3.2 åˆ†é›¢æ†‘è­‰èˆ‡éˆï¼ˆå»ºè­°ï¼‰</h3>
<pre><code class="language-nginx">server {
    listen 443 ssl http2;
    server_name  example.com www.example.com;

    ssl_certificate           /etc/nginx/ssl/example.com.crt;  # åªæ”¾ç¶²ç«™æ†‘è­‰
    ssl_certificate_key       /etc/nginx/ssl/server.key;       # ç§é‘° (ç„¡å¯†ç¢¼)
    ssl_trusted_certificate   /etc/nginx/ssl/chain.pem;        # ä¸­ç¹¼(+æ ¹)

    ssl_stapling on;
    ssl_stapling_verify on;
    resolver 1.1.1.1 8.8.8.8;
}
</code></pre>
<blockquote>
<p>å»ºè­°ç§é‘°èˆ‡å…¶æ‰€åœ¨ç›®éŒ„æ¬Šé™å¦‚ä¸‹ï¼š</p>
</blockquote>
<pre><code class="language-bash"># åƒ… root èƒ½å­˜å–ç›®éŒ„
sudo chmod 700 /etc/nginx/ssl

# ç§é‘°æª”åƒ… root å¯è®€å¯«
sudo chown root:root /etc/nginx/ssl/server.key
sudo chmod 600 /etc/nginx/ssl/server.key
</code></pre>
<hr>
<h2>4. æª”æ¡ˆé©—è­‰èˆ‡ Nginx æ“ä½œæŒ‡ä»¤</h2>
<h3>4.1 é©—è­‰ç§é‘°èˆ‡æ†‘è­‰æ˜¯å¦åŒ¹é…</h3>
<pre><code class="language-bash">openssl rsa  -noout -modulus -in server.key        | openssl md5
openssl x509 -noout -modulus -in example.com.crt   | openssl md5
# å…©ä¸² MD5 å€¼å¿…é ˆç›¸åŒ
</code></pre>
<h3>4.2 é©—è­‰æ†‘è­‰éˆå®Œæ•´</h3>
<pre><code class="language-bash">openssl verify -CAfile chain.pem example.com.crt   # é¡¯ç¤º OK å³é€šé
</code></pre>
<h3>4.3 Nginx èªæ³•æª¢æŸ¥èˆ‡é‡æ–°è¼‰å…¥</h3>
<pre><code class="language-bash">sudo nginx -t                          # æª¢æŸ¥è¨­å®šæª”èªæ³•
sudo systemctl reload nginx            # å¹³æ»‘é‡è¼‰ï¼Œä¸ä¸­æ–·é€£ç·š
# è‹¥è¦å®Œæ•´é‡å•Ÿï¼ˆæœ‰åœæ©Ÿé¢¨éšªï¼‰
sudo systemctl restart nginx
</code></pre>
<blockquote>
<p>æ¯æ¬¡ä¿®æ”¹æ†‘è­‰æˆ–è¨­å®šæª”å¾Œï¼Œå‹™å¿…å…ˆ <code>nginx -t</code> å† reloadï¼Œç¢ºä¿ä¸ä¸­æ–·æœå‹™ã€‚</p>
</blockquote>
<hr>
<p><strong>æ›´æ–°ç´€éŒ„</strong></p>
<ul>
<li>2025â€‘04â€‘22ï¼šé¦–ç‰ˆå®Œæˆ</li>
</ul>
<blockquote>
<p>å¦‚éœ€æ–°å¢å…¶ä»–æ¡ˆä¾‹æˆ–æŒ‡ä»¤ï¼Œè«‹éš¨æ™‚æ–¼ Canvas å…§ç·¨è¼¯ï¼</p>
</blockquote>

  </div>
</article>

    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-branding">
          <h2><i class="fas fa-terminal"></i> WhyBlog</h2>
          <p class="footer-tagline">åˆ†äº«æŠ€è¡“èˆ‡ç”Ÿæ´»çš„å€‹äººéƒ¨è½æ ¼</p>
        </div>
        <div class="footer-nav">
          <h3>å°èˆª</h3>
          <ul>
            <li><a href="/">é¦–é </a></li>
            <li><a href="/blog/">éƒ¨è½æ ¼</a></li>
            <li><a href="/knowledge/">çŸ¥è­˜åº«</a></li>
            <li><a href="/about/">é—œæ–¼æˆ‘</a></li>
          </ul>
        </div>
        <div class="footer-social">
          <h3>ç¤¾ç¾¤é€£çµ</h3>
          <div class="social-icons">
            <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 WhyBlog. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // Mobile navigation toggle
    document.querySelector('.menu-toggle').addEventListener('click', function() {
      document.querySelector('.nav-links').classList.toggle('active');
      this.classList.toggle('active');
    });
  </script>
</body>
</html>